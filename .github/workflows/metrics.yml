# ===================================================================================
# GitHub Metrics - Workflow de generation automatique
# ===================================================================================
# Genere des metriques precises avec lowlighter/metrics
# Inclut l'analyse approfondie des langages (indepth mode)
# ===================================================================================

name: GitHub Metrics

on:
  # Mise a jour quotidienne a 6h00 UTC
  schedule:
    - cron: "0 6 * * *"

  # Mise a jour a chaque push sur main/master
  push:
    branches:
      - main
      - master

  # Permet de lancer manuellement
  workflow_dispatch:

jobs:
  # ===========================================================================
  # Metriques principales
  # ===========================================================================
  github-metrics-main:
    runs-on: ubuntu-latest
    permissions:
      contents: write
    steps:
      - name: Generate Main Metrics
        uses: lowlighter/metrics@latest
        with:
          token: ${{ secrets.METRICS_TOKEN }}
          filename: metrics-main.svg
          user: artik0din
          template: classic
          base: header, activity, community, repositories, metadata
          base_indepth: yes
          config_timezone: Asia/Dubai
          config_animations: yes
          config_display: large
          repositories_forks: yes

  # ===========================================================================
  # Langages (analyse approfondie)
  # ===========================================================================
  github-metrics-languages:
    runs-on: ubuntu-latest
    permissions:
      contents: write
    steps:
      - name: Generate Languages Metrics
        uses: lowlighter/metrics@latest
        with:
          token: ${{ secrets.METRICS_TOKEN }}
          filename: metrics-languages.svg
          user: artik0din
          template: classic
          base: ""
          plugin_languages: yes
          plugin_languages_indepth: yes
          plugin_languages_analysis_timeout: 30
          plugin_languages_analysis_timeout_repositories: 10
          plugin_languages_categories: programming, markup
          plugin_languages_colors: github
          plugin_languages_details: bytes-size, percentage, lines
          plugin_languages_limit: 10
          plugin_languages_recent_days: 365
          plugin_languages_recent_load: 500
          plugin_languages_sections: most-used
          plugin_languages_threshold: 0%
          plugin_languages_ignored: html, css, scss, less
          repositories_affiliations: owner, collaborator, organization_member
          commits_authoring: artik0din, kevin@globodai.com, Kevin V

  # ===========================================================================
  # Calendrier isometrique
  # ===========================================================================
  github-metrics-isocalendar:
    runs-on: ubuntu-latest
    permissions:
      contents: write
    steps:
      - name: Generate Isocalendar
        uses: lowlighter/metrics@latest
        with:
          token: ${{ secrets.METRICS_TOKEN }}
          filename: metrics-isocalendar.svg
          user: artik0din
          template: classic
          base: ""
          plugin_isocalendar: yes
          plugin_isocalendar_duration: full-year

  # ===========================================================================
  # Achievements
  # ===========================================================================
  github-metrics-achievements:
    runs-on: ubuntu-latest
    permissions:
      contents: write
    steps:
      - name: Generate Achievements
        uses: lowlighter/metrics@latest
        with:
          token: ${{ secrets.METRICS_TOKEN }}
          filename: metrics-achievements.svg
          user: artik0din
          template: classic
          base: ""
          plugin_achievements: yes
          plugin_achievements_display: detailed
          plugin_achievements_secrets: yes
          plugin_achievements_threshold: C

  # ===========================================================================
  # Activite recente
  # ===========================================================================
  github-metrics-activity:
    runs-on: ubuntu-latest
    permissions:
      contents: write
    steps:
      - name: Generate Activity
        uses: lowlighter/metrics@latest
        with:
          token: ${{ secrets.METRICS_TOKEN }}
          filename: metrics-activity.svg
          user: artik0din
          template: classic
          base: ""
          plugin_activity: yes
          plugin_activity_limit: 5
          plugin_activity_days: 14
          plugin_activity_filter: all
          plugin_activity_visibility: public
          plugin_activity_timestamps: yes

  # ===========================================================================
  # Habitudes de code
  # ===========================================================================
  github-metrics-habits:
    runs-on: ubuntu-latest
    permissions:
      contents: write
    steps:
      - name: Generate Habits
        uses: lowlighter/metrics@latest
        with:
          token: ${{ secrets.METRICS_TOKEN }}
          filename: metrics-habits.svg
          user: artik0din
          template: classic
          base: ""
          config_timezone: Asia/Dubai
          plugin_habits: yes
          plugin_habits_charts: yes
          plugin_habits_charts_type: classic
          plugin_habits_days: 30
          plugin_habits_facts: yes
          plugin_habits_from: 500
          plugin_habits_languages_limit: 8
          plugin_habits_languages_threshold: 0%

